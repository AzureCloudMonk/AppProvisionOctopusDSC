{
  "$type": "Octopus.Core.Model.Projects.DeploymentProcess, Octopus.Core",
  "Id": "deploymentprocess-Projects-21",
  "OwnerId": "Projects-21",
  "Version": 9,
  "Steps": [
    {
      "Id": "c4c65385-87f6-4241-a36f-a4d48235a970",
      "Name": "Deploy webApp",
      "Condition": "Always",
      "StartTrigger": "StartAfterPrevious",
      "RequiresPackagesToBeAcquired": false,
      "Actions": [
        {
          "Id": "b8a3376f-99fa-4336-8bb9-e44900eda294",
          "Name": "Deploy webApp",
          "ActionType": "Octopus.TentaclePackage",
          "IsDisabled": false,
          "Environments": [],
          "ExcludedEnvironments": [],
          "Channels": [],
          "TenantTags": [],
          "Properties": {
            "Octopus.Action.EnabledFeatures": "Octopus.Features.JsonConfigurationVariables",
            "Octopus.Action.Package.DownloadOnTentacle": "False",
            "Octopus.Action.Package.FeedId": "feeds-builtin",
            "Octopus.Action.Package.PackageId": "webApp",
            "Octopus.Action.Package.JsonConfigurationVariablesEnabled": "True"
          }
        }
      ],
      "Properties": {
        "Octopus.Action.TargetRoles": "web-server"
      }
    },
    {
      "Id": "6a542c25-6fff-4cc8-a0d0-70cd2ffa9af9",
      "Name": "Invoke-DscAppConfig",
      "Condition": "Success",
      "StartTrigger": "StartAfterPrevious",
      "RequiresPackagesToBeAcquired": false,
      "Actions": [
        {
          "Id": "5b885aa0-673b-4128-9984-c577eb99aa8b",
          "Name": "Invoke-DscAppConfig",
          "ActionType": "Octopus.Script",
          "IsDisabled": false,
          "Environments": [],
          "ExcludedEnvironments": [],
          "Channels": [],
          "TenantTags": [],
          "Properties": {
            "Octopus.Action.Script.ScriptSource": "Inline",
            "Octopus.Action.Script.Syntax": "PowerShell",
            "Octopus.Action.Script.ScriptBody": "try\n{\n\tImport-Module InvokeDSC -Force\n}\ncatch [System.IO.FileNotFoundException]\n{\n\tthrow 'InvokeDSC module not found'\n}\n\n$splat = @{\n    Path = $Path\n    Repository = $Repository\n}\n\nInvoke-DscConfiguration @splat",
            "Octopus.Action.Template.Version": "2",
            "Octopus.Action.Template.Id": "ActionTemplates-21",
            "Octopus.Action.RunOnServer": "false",
            "Repository": "PSGallery",
            "Path": "#{Octopus.Action[Deploy webApp].Output.Package.InstallationDirectoryPath}\\webApp.IISConfig.json"
          }
        }
      ],
      "Properties": {
        "Octopus.Action.TargetRoles": "web-server"
      }
    },
    {
      "Id": "5be46a18-e62f-4c81-b484-8de3115c8685",
      "Name": "Write-Out Variables",
      "Condition": "Success",
      "StartTrigger": "StartAfterPrevious",
      "RequiresPackagesToBeAcquired": false,
      "Actions": [
        {
          "Id": "ea4e4240-1928-4376-92af-803f7d3c7bf1",
          "Name": "Write-Out Variables",
          "ActionType": "Octopus.Script",
          "IsDisabled": false,
          "Environments": [],
          "ExcludedEnvironments": [],
          "Channels": [],
          "TenantTags": [],
          "Properties": {
            "Octopus.Action.RunOnServer": "false",
            "Octopus.Action.Script.ScriptSource": "Inline",
            "Octopus.Action.Script.Syntax": "PowerShell",
            "Octopus.Action.Script.ScriptBody": "$OctopusParameters[\"Octopus.Action[Deploy webApp].Output.Package.InstallationDirectoryPath\"]\n\n#{Octopus.Action[Deploy webApp].Output.Package.InstallationDirectoryPath"
          }
        }
      ],
      "Properties": {
        "Octopus.Action.TargetRoles": "web-server"
      }
    }
  ],
  "RelatedDocumentIds": []
}